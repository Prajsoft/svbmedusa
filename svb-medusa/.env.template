# ─── Core ──────────────────────────────────────────────────────
NODE_ENV=development
LOG_LEVEL=debug

# ─── Database (Neon PostgreSQL) ────────────────────────────────
DATABASE_URL=postgresql://user:password@host/dbname?sslmode=require

# ─── Auth Secrets (CHANGE IN PRODUCTION — use strong random strings) ──
JWT_SECRET=supersecret
COOKIE_SECRET=supersecret

# ─── CORS (comma-separated origins) ───────────────────────────
# Development defaults — update for production
STORE_CORS=http://localhost:8000
ADMIN_CORS=http://localhost:9000
AUTH_CORS=http://localhost:8000

# Production example:
# STORE_CORS=https://svbsports.com,https://www.svbsports.com
# ADMIN_CORS=https://your-medusa-backend.railway.app
# AUTH_CORS=https://svbsports.com,https://your-medusa-backend.railway.app

# ─── Medusa Backend URL (used by admin dashboard) ─────────────
MEDUSA_BACKEND_URL=http://localhost:9000
# Production: MEDUSA_BACKEND_URL=https://your-medusa-backend.railway.app

# ─── Redis (optional for dev, recommended for production) ─────
# REDIS_URL=redis://localhost:6379

# ─── Cloudflare R2 File Storage ───────────────────────────────
R2_ENDPOINT=https://your-account-id.r2.cloudflarestorage.com
R2_BUCKET=svb-assets
R2_REGION=auto
R2_ACCESS_KEY_ID=
R2_SECRET_ACCESS_KEY=
R2_PUBLIC_URL=https://your-public-bucket-url.r2.dev

# ─── Resend Email ─────────────────────────────────────────────
RESEND_API_KEY=
RESEND_FROM_EMAIL=onboarding@resend.dev

# ─── Admin Dashboard ──────────────────────────────────────────
MEDUSA_ADMIN_ONBOARDING_TYPE=default
# Set to "true" to disable admin dashboard build (e.g. worker-only deploys)
# DISABLE_ADMIN=false

# ─── Payments: Razorpay (Test/Live Guarded) ───────────────────
# test | live
PAYMENTS_MODE=test
# Global payments kill switch (false = fail fast with PROVIDER_UNAVAILABLE)
PAYMENTS_ENABLED=true
# Default provider for new payment session selection (WIP)
PAYMENT_PROVIDER_DEFAULT=razorpay
# Enable Razorpay provider (or keep false and rely on key presence auto-enable)
ENABLE_RAZORPAY=true
RAZORPAY_KEY_ID=rzp_test_your_key_id
RAZORPAY_KEY_SECRET=your_test_key_secret
RAZORPAY_WEBHOOK_SECRET=your_test_webhook_secret
# test-mode convenience for checkout completion in v1 (opt-in only)
RAZORPAY_TEST_AUTO_AUTHORIZE=false
# WARNING: keep false in all real environments. true allows unverified webhooks.
PAYMENTS_ALLOW_UNVERIFIED_WEBHOOKS=false
# Shared webhook pipeline override. Default false: reject unsigned/unverifiable webhooks.
ALLOW_UNSIGNED_WEBHOOKS=false
# Optional override (default: https://api.razorpay.com)
# RAZORPAY_API_BASE_URL=https://api.razorpay.com

# ─── Product Feed (Meta / Google) ────────────────────────────
ENABLE_PRODUCT_FEED=false
PRODUCT_FEED_TOKEN=replace-with-a-long-random-token
STOREFRONT_URL=https://www.svbsports.com
# true = amounts are returned in minor units (for INR, paise)
PRICES_ARE_MINOR_UNITS=true

# ─── Shipping / Carriers (Shiprocket) ────────────────────────
# Adapter used by fulfillment subscriber path (dev default is fake)
CARRIER_ADAPTER=fake
# Default provider used by router for new shipments
SHIPPING_PROVIDER_DEFAULT=fake
# Global shipping booking kill-switch
SHIPPING_BOOKING_ENABLED=false

# Shiprocket auth + base URL
SHIPROCKET_SELLER_EMAIL=
SHIPROCKET_SELLER_PASSWORD=
SHIPROCKET_BASE_URL=https://apiv2.shiprocket.in/v1/external
# Optional static token override (if set, login flow is skipped)
# SHIPROCKET_TOKEN=

# Webhook security
SHIPROCKET_WEBHOOK_TOKEN=
# Optional HMAC/IP verification inputs (used by provider verifyWebhook flow)
SHIPROCKET_WEBHOOK_SECRET=
SHIPROCKET_WEBHOOK_IP_ALLOWLIST=
SHIPROCKET_WEBHOOK_SIGNATURE_HEADER=x-shiprocket-signature

# Token + retry tuning
SHIPROCKET_TOKEN_TTL_HOURS=24
SHIPROCKET_TOKEN_REFRESH_SKEW_MINUTES=10
SHIPROCKET_RETRY_MAX_ATTEMPTS=3
SHIPROCKET_RETRY_BASE_DELAY_MS=200
SHIPROCKET_RETRY_JITTER_MS=100
SHIPROCKET_RATE_CALCULATOR_PATH=/v1/external/courier/serviceability/
SHIPROCKET_LABEL_TTL_HOURS=24

# Shipping maintenance jobs
SHIPPING_WEBHOOK_REPLAY_CRON=*/5 * * * *
SHIPPING_BOOKING_RECOVERY_CRON=*/10 * * * *
SHIPPING_BOOKING_RECOVERY_OLDER_THAN_MINUTES=10
SHIPPING_BOOKING_RECOVERY_LIMIT=100
SHIPPING_EVENTS_PAYLOAD_PURGE_CRON=0 2 * * *
SHIPPING_EVENTS_PAYLOAD_TTL_DAYS=90
